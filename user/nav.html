<!-- components/navigation.html -->
<nav class="navbar">
  <div class="nav-container">
    <div class="logo">ShopHub</div>
    <button class="menu-btn" id="menuBtn" aria-label="Open menu">
      <i class="fas fa-bars"></i>
    </button>
  </div>
</nav>

<!-- Overlay -->
<div class="overlay" id="overlay"></div>

<!-- Sliding Menu -->
<div class="slide-menu" id="slideMenu">
  <div class="slide-menu-header">
    <h2>My Vault</h2>
    <button class="close-btn" id="closeBtn" aria-label="Close menu">Ã—</button>
  </div>
  <div class="slide-menu-body">
    <div class="user-info">
      <div class="user-avatar-large">K</div>
      <div>
        <h3>Krlvin</h3>
        <p>krlvin@example.com</p>
      </div>
    </div>
    <ul class="menu-list">
      <li><a href="userDashboard.html"><i class="fas fa-shopping-bag"></i> My Orders</a></li>
      <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
      <li><a href="addresses.html"><i class="fas fa-map-marker-alt"></i> Addresses</a></li>
      <li><a href="payment.html"><i class="fas fa-credit-card"></i> Payment</a></li>
      <li><a href="wishlist.html"><i class="fas fa-heart"></i> Wishlist <span class="badge"></span></a></li>
      <li>
        <a href="#" onclick="logoutUser()">Logout</a>
      </li>
    </ul>
  </div>
</div>

<script>
  // Initialize Supabase client (Make sure this is done globally)
  const supabase = createClient('https://nhyucbgjocmwrkqbjjme.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5oeXVjYmdqb2Ntd3JrcWJqam1lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM0OTQzNjAsImV4cCI6MjA3OTA3MDM2MH0.uu5ZzSf1CHnt_l4TKNIxWoVN_2YCCoxEZiilB1Xz0eE');

  // Menu open/close functionality
  const menuBtn = document.getElementById('menuBtn');
  const slideMenu = document.getElementById('slideMenu');
  const overlay = document.getElementById('overlay');
  const closeBtn = document.getElementById('closeBtn');

  menuBtn.addEventListener('click', () => {
    slideMenu.classList.add('open');
    overlay.classList.add('active');
  });

  closeBtn.addEventListener('click', () => {
    closeMenu();
  });

  overlay.addEventListener('click', () => {
    closeMenu();
  });

  function closeMenu() {
    slideMenu.classList.remove('open');
    overlay.classList.remove('active');
  }

  // Logout functionality
  function logoutUser() {
    supabase.auth.signOut().then(() => {
      localStorage.removeItem('shophub_cart');
      alert('Logged out! Cart emptied.');
      closeMenu();  // Close menu after logout
      location.href = '../index.html';  // Redirect to homepage
    }).catch((error) => {
      console.error('Logout Error:', error);
      alert('Error during logout: ' + error.message);
    });
  }
</script>
